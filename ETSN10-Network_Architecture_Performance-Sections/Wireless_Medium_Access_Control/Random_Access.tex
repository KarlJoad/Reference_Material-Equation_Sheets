\subsection{Random Access}\label{subsec:Random_Access}
\begin{definition}[Random Access]\label{def:Random_Access}
  \emph{Random Access} is the process by which a user can request resources from a system for a duration of time.
  After this time period has passed, the resources are freed from that user and may be passed to another.
  These are also called \emph{Contention-Based protocols}.

  This allows for sharing the same resources among many users, but there may be contention for the resources.
  In addition, because there is not way to arbitrate the delivery of data, there may be packet collisions when multiple transmitters send data, and the receiver cannot decode the data from just one of them.
\end{definition}

\subsubsection{Fundamentals of ALOHA}\label{subsubsec:ALOHA_Fundamentals}
\begin{itemize}[noitemsep]
\item Full duplex communication.
  \begin{itemize}[noitemsep]
  \item Up-link (Upload)
  \item Down-link (Download)
  \end{itemize}

\item Originally UHF (Ultra-High Frequency) communication
\item Incoming traffic (to base station):
  \begin{itemize}[noitemsep]
  \item 9,600 bps (403.500 MHz)
  \item Random access (Pure ALOHA)
  \end{itemize}
\item Outgoing traffic (from base station):
  \begin{itemize}[noitemsep]
  \item 9,600 bps (413.474 MHz)
  \item Broadcast
  \end{itemize}
\end{itemize}

\paragraph{Pure ALOHA}\label{par:Pure_ALOHA}
\begin{itemize}[noitemsep]
\item Whenever a station has something to send, it sends.
\item When a packet is received by the central, an acknowledgment (\texttt{ACK}) is sent back in broadcast.
\item If the sending station does not receive an \texttt{ACK} within a set time, a collision is assumed.
\item When a collision occurs, retransmit within a random time slot, 200--1500 ms.
\end{itemize}

\begin{remark*}
  We wait a random amount of time before transmitting to prevent retransmission collisions.
  If 2 nodes were to experience a collision, and both waited a fixed amount of time, then they would collide a again during their retransmission.
\end{remark*}

\paragraph{Slotted ALOHA}\label{par:Slotted_ALOHA}
\begin{itemize}[noitemsep]
\item Packets may just be transmitted within time slots.
\item If a station has started to transmit in a time slot, other station who wish to transmit within this time slot can not interfere.
\item This principle leads to a much better utilization of the channel.
\end{itemize}

The utilization gets so much better because there is \textbf{no chance} of a collision.
Since each station can only transmit if no other station is transmitting in this time slot, there cannot be collisions part-way through a packet's transmission.

\paragraph{ALOHA Performance}\label{par:ALOHA_Performance}
Packet generation process is Poisson distributed with $n$ packets generated during time $t$:
\begin{equation*}
  \Prob(n, t) = \frac{{\left( \lambda_{p}t \right)}^{n} e^{(-\lambda_{p}t)}}{n!}
\end{equation*}

The probability zero packets generated during time $t$ is
\begin{equation*}
  \Prob(n = 0, t) = \frac{{\left( \lambda_{p}t \right)}^{0} e^{-\lambda_{p}t}}{0!} = e^{-\lambda_{p}t}
\end{equation*}

The Effective throughput is equal to the Rate multiplied by the probability of success.
\begin{equation*}
  T_{\mathrm{Put}} = \lambda_{p}T_{p}e^{(-\lambda_{p}T_{p})}
\end{equation*}

The maximum for \nameref{par:Pure_ALOHA} is found at:
\begin{equation*}
  \frac{\partial}{\partial x} T_{\mathrm{Put}} = 0 \Rightarrow \frac{1}{2e}
\end{equation*}

In \nameref{par:Slotted_ALOHA}, $t = T_{\mathrm{P}}$, so its maximum is found at:
\begin{equation*}
  \frac{\partial}{\partial x} T_{\mathrm{Put}} = 0 \Rightarrow \frac{1}{e}
\end{equation*}

\subsubsection{Carrier Sense Multiple Access}\label{subsubsec:CSMA}
\begin{definition}[Carrier Sense Multiple Access]\label{def:CSMA}
  In \emph{Carrier Sense Multiple Access} (\emph{CSMA}), a channel can only transmit its message if the underlying network connection does not have an ongoing transmission.
  This is sometimes called the polite method or Listen Before Talk network communication because of the Carrier Sense that must occur.
  \begin{itemize}[noitemsep]
  \item If the channel is free, it starts to send.
  \item If the device that wants to send senses the channel is busy, it waits to send.
    \begin{itemize}[noitemsep]
    \item The station might be persistent, meaning it might continue to try sensing the network.
    \end{itemize}

  \item Acknowledgement
  \end{itemize}
\end{definition}

\begin{definition}[Persistence]\label{def:Persistence}
  \emph{Persistence} is a property of \nameref{def:CSMA} systems.
  Systems that use persistence are known as persistent systems.

  \begin{remark*}
    It might be helpful to think of persistence as the device's persistence to listen to the channel.
  \end{remark*}

  There are 3 types of persistent systems.
  \begin{enumerate}[noitemsep]
  \item \nameref{def:Non_Persistent}
  \item \nameref{def:p_Persistent}
  \item \nameref{def:Persistent}
  \end{enumerate}
\end{definition}

\begin{definition}[Non-Persistent]\label{def:Non_Persistent}
  A \emph{Non-Persistent} system behaves as follows:
  \begin{enumerate}[noitemsep]
  \item If the channel is busy, the device will wait a random time before performing another carrier sense on the channel.
  \item Once the channel is idle, the packet is sent immediately.
  \end{enumerate}

  The performance of a non-persistent system is:
  \begin{equation}\label{eq:Non_Persistent_Performance}
    S_{1} = \frac{G e^{-G} (1+G)}{G + e^{-G}}
  \end{equation}
  where
  \begin{itemize}[noitemsep]
  \item $G$: Offered Load
  \item $S$: Throughput
  \end{itemize}
\end{definition}

\begin{definition}[$p$-Persistent]\label{def:p_Persistent}
  A \emph{$p$-Persistent} system behaves as follows:
  \begin{enumerate}[noitemsep]
  \item If the channel is busy, the device will continue to perform carrier sense on the channel.
  \item Once the channel is idle, there is a probability $p$ that the device will send.
  \item There is a $1-p$ probability that the deivce will instead wait one time unit before performing carrier sense again.
  \end{enumerate}

  The performance of a $p$-persistent system is:
  \begin{equation}\label{eq:p_Persistent_Performance}
    S_{p} = \frac{G e^{-G} (1+pGx)}{G + e^{-G}}
  \end{equation}
  where
  \begin{itemize}[noitemsep]
  \item $G$: Offered Load
  \item $S$: Throughput
  \item $x$: Is defined by \Cref{eq:p_Persistent_x_Value}
    \begin{equation}\label{eq:p_Persistent_x_Value}
      x = \sum\limits_{k=0}^{\infty} \frac{{(qG)}^{k}}{(1-q^{k+1})!}
    \end{equation}
  \end{itemize}
\end{definition}

\begin{definition}[Persistent]\label{def:Persistent}
  A \emph{Persistent} system behaves as follows:
  \begin{enumerate}[noitemsep]
  \item If the channel is busy, the device will continue to use carrier sense on the channel.
  \item Once the channel is idle, this device will start sending its packet immediately.
  \end{enumerate}

  The performance of a persistent system is:
  \begin{equation}\label{eq:Persistent_Performance}
    S_{n} = \frac{G}{1+G}
  \end{equation}
  where
  \begin{itemize}[noitemsep]
  \item $G$: Offered Load
  \item $S$: Throughput
  \end{itemize}
\end{definition}

\subsubsection{Carrier Sense Multiple Access/Collision Detection}\label{subsubsec:CSMACD}
\begin{definition}[Carrier Sense Multiple Access/Collision Detection]\label{def:CSMACD}
  \emph{Carrier Sense Multiple Access/Collision Detection} is a modification of \nameref{def:CSMA}.
  It functions in much the same way, but:
  \begin{enumerate}[noitemsep]
  \item Perform Carrier Sensing
    \begin{itemize}[noitemsep]
    \item If the channel is free, send.
    \end{itemize}

  \item The station listens when sending
    \begin{itemize}[noitemsep]
    \item When a station detects a collision, it stops sending
    \end{itemize}

  \item Retransmissions
  \end{enumerate}
\end{definition}

If we use a simplistic model:
\begin{itemize}[noitemsep]
\item All stations are the same
\item No exponential backoff of tranmissions
\item All packets are the same size
\item All stations have the same transmission probability
\item $k$ stations
\item $p$ Probability of transmission
\item $A$ Probability 1 station acquires channel in slot
\end{itemize}

\begin{equation}\label{eq:CSMACD_Performance}
  A(k, p) = kp{(1-p)}^{k-1}
\end{equation}

We can find the maximum performance of the system, which occurs when $p=\frac{1}{k}$.
\begin{equation}\label{eq:CSMACD_Max_Performance}
  A_{\mathrm{Max}} = {(1-\frac{1}{k})}^{k-1}
\end{equation}

If we allow the number of stations to grow towards infinity, then
\begin{equation}\label{eq:CSMACD_Performance_Infinity}
  \lim\limits_{k \rightarrow \infty} A(k, p) = \frac{1}{e}
\end{equation}

If we want to know the number of repeated collisions that occur, then a successful transmission, we can use the derivation below.
We define $w$ to be the number of slots $i$ in a row with collisions or an idle channel, with a subsequent successful tranmission.
\begin{align*}
  \ExpectedValue[w] &= \sum\limits_{i=0}^{\infty} i \Prob[w] \\
                    &= \sum\limits_{i=0}^{\infty} i {(1-A)}^{i}A \\
                    &= \frac{1-A}{A} \:\: \text{Geometric Series}
\end{align*}

Now if we want to find the utilization of the system, $U$, we apply the equation below.
\begin{equation}\label{eq:Utilization}
  U = \frac{T_{\mathrm{Trans}}}{T_{\mathrm{Trans}} + 2T_{\mathrm{Prop}} + T_{\mathrm{Prop}}\left( \frac{1-A}{A} \right)}
\end{equation}

This is interpreted as transmission time divided by the sum of the transmission time, the total propagation delay, and the contention time.
If we define $a = \frac{T_{\mathrm{Prop}}}{T_{\mathrm{Trans}}}$, the the normalized utilization is as shown in \Cref{eq:CSMACD_Normalized_Utilization}.
\begin{equation}\label{eq:CSMACD_Normalized_Utilization}
  U = \frac{1}{1 + 2a + a \left( \frac{1-A}{A} \right)}
\end{equation}

\begin{remark*}[Utilization vs. Propagation Delay]
  The utilization of a \nameref{def:CSMACD} system falls as the propagation delay increases, because there is a greater delay for any single node to be able to see that the network is busy.
  If the propagation delay increases past a certain point, then the system is waiting for so long that it can never find that someone else is transmitting.
\end{remark*}

\subsubsection{WiFi}\label{subsubsec:WiFi}
\begin{definition}[WiFi]\label{def:WiFi}
  \emph{WiFi} is defined by the IEEE 802.11 family of protocols.
  Many different protocols (with different letters) exist, all of which have different purposes.
  The current general-purpose version is 802.11ac.

  The 802.11 specification allows different MAC protocols to be used.
  \begin{itemize}[noitemsep]
  \item \nameref{def:WiFi_DCF} (DCF)
    \begin{itemize}[noitemsep]
    \item \nameref{def:CSMA}-based random access.
    \end{itemize}

  \item \nameref{def:PCF} (PCF)
    \begin{itemize}[noitemsep]
    \item Random access periods followed by non-contention periods with polling.
    \item Rarely used outside of industry.
    \end{itemize}

  \item Enhanced Distributed Channel Access (EDCA)
    \begin{itemize}[noitemsep]
    \item \nameref{def:WiFi_DCF} with some QoS features added.
    \end{itemize}
  \end{itemize}
\end{definition}

\begin{definition}[Distributed Coordination Function]\label{def:WiFi_DCF}
  The \emph{Distributed Coordination Function} (\emph{DCF}) is similar to a \nameref{def:p_Persistent} \nameref{def:CSMA} system, but with a different backoff method.
  \begin{itemize}[noitemsep]
  \item Each node has a contention window (CW).
  \item When the node detects channel busy, it chooses a (uniform) random number of slots to wait in the range $[1, \mathrm{CW}]$.
  \item $\mathrm{CW}$ starts at a minimum value $\mathrm{CW}_{\mathrm{Min}}$.
  \item When a collision is detected, $\mathrm{CW}$ doubles (binary exponential back-off) up to a maximum value of $\mathrm{CW}_{Max}$.
  \item Whenever a successful transmission occurs, the receivers sends an acknowledgement.
  \item Lack of acknowledgement indicates a collision.
  \end{itemize}

  To help the rest of the DCF system run, there are 2 temporal buffers that we used, called \nameref{def:Inter_Frame_Spacing}.
  \begin{enumerate}[noitemsep]
  \item \nameref{def:DIFS}
  \item \nameref{def:SIFS}
  \end{enumerate}
\end{definition}


\subsubsection{Carrier Sense Multiple Access/Collision Avoidance}\label{subsubsec:CSMACA}

%%% Local Variables:
%%% mode: latex
%%% TeX-master: "../../ETSN10-Network_Architecture_Performance-Reference_Sheet"
%%% End:
