\section{Virtual Machines}\label{sec:Virtual_Machines}
With a \nameref{def:Virtual_Machine}, guest \nameref{def:Operating_System}s and applications run on a system utilizing \nameref{def:Virtualization}.

\begin{definition}[Virtualization]\label{def:Virtualization}
  \emph{Virtualization} is the act of abstracting the \nameref{def:Hardware} of a single computer into several different execution environments.
  Each of these execution environments operates under the illusion that they are the only environment running on its own private computer.
  These ``computer'' for these environments appears to be native hardware and things in these environments behave as native hardware would but that also protects, manages, and limits them.
\end{definition}

This concept is similar to the \nameref{subsubsec:Layered_Approach} of \nameref{def:Operating_System} implementation (see \Cref{subsubsec:Layered_Approach}).
In the case of \nameref{def:Virtualization}, there is a layer that creates a virtual system on which operating systems or applications can run.

\begin{definition}[Virtual Machine]\label{def:Virtual_Machine}
  A \emph{Virtual Machine} (\emph{VM}, not to be confused with \nameref{def:Virtual_Memory}'s VM) is an \nameref{def:Operating_System} that is running inside an execution environment provided by \nameref{def:Virtualization}.
  The operating system running on this virtualized hardware believes it is running on real hardware, with all of its quirks and problems.
  This operating system also believes it is the \textbf{only} one running, when there could be several virtual machines running on the same hardware.
\end{definition}

\nameref{def:Virtual_Machine} implementations involve several components.
At the base is the \nameref{def:VM_Host}.

\begin{definition}[Host]\label{def:VM_Host}
  The \emph{host} is the the underlying physical \nameref{def:Hardware} system that runs the virtual machines.
\end{definition}

The \nameref{def:VM_Host} runs the \nameref{def:Virtual_Machine_Manager}.

\begin{definition}[Virtual Machine Manager]\label{def:Virtual_Machine_Manager}\label{def:Hypervisor}\label{def:VMM}
  The \emph{Virtual Machine Manager} (\emph{VMM}), also known as a \emph{hypervisor} creates and runs virtual machines by providing an interface that is identical to the host to every guest..
  \begin{remark}
    This is true except in the case of \nameref{subsubsec:Paravirtualization}.
  \end{remark}
\end{definition}

Each guest process is provided with a virtual copy of the host.
Usually, the guest process is an \nameref{def:Operating_System}.
A single physical machine can run multiple operating systems concurrently, each in its own virtual machine.

With \nameref{def:Virtualization}, the definition of ``\nameref{def:Operating_System}'' once again blurs.
For example, consider \nameref{def:VMM} software such as VMware ESX.\@
This virtualization software:
\begin{itemize}[noitemsep]
\item Is installed on the hardware
\item Runs when the hardware boots
\item Provides services to applications
  \begin{itemize}[noitemsep]
  \item CPU scheduling
  \item Memory Management
  \item Migration of VMs between systems.
  \end{itemize}
\end{itemize}

Furthermore, the ``applications'' are guest \nameref{def:Operating_System}s.
Is the VMware ESX VMM an operating system that, in turn, runs other operating systems?
It certainly acts like an operating system.

The implementation of VMMs varies greatly. Options include the following:
\begin{itemize}[noitemsep]
\item Hardware-based solutions that provide support for virtual machine creation and management via \nameref{def:Firmware}.
  These VMMs, which are only found in mainframes, are known as \nameref{def:Type0_Hypervisor}.
  IBM LPARs and Oracle LDOMs are examples.
\item \nameref{def:Operating_System}-like software built to provide \nameref{def:Virtualization}, including VMware ESX, Joyent SmartOS, and Citrix XenServer.
  These VMMs are known as \nameref{def:Type1_Hypervisor}s.
\item General-purpose \nameref{def:Operating_System}s that provide standard functions \textbf{as well as} \nameref{def:VMM} functions, including Microsoft Windows Server with HyperV and Linux with the KVM feature.
  Because such systems have a feature set similar to \nameref{def:Type1_Hypervisor}s, they are also considered type 1.
\item Regular applications that run on standard \nameref{def:Operating_System}s but provide \nameref{def:VMM} features to guest operating systems.
  These applications, which include VMware, Parallels Desktop, and Oracle VirtualBox, are \nameref{def:Type2_Hypervisor}s.
\item \nameref{subsubsec:Paravirtualization}, a technique in which the guest \nameref{def:Operating_System} is modified to work in cooperation with the \nameref{def:VMM} to optimize performance.
\item Programming-environment virtualization, in which \nameref{def:VMM}s do not virtualize real hardware but instead create an optimized virtual system.
  This technique is used by Oracle Java and Microsoft.Net.
\item Emulators that allow applications written for one hardware environment to run on a very different hardware environment, such as a different type of CPU.\@
\item Application containment, which is not virtualization at all but rather provides virtualization-like features by segregating applications from the \nameref{def:Operating_System}.
  Solaris Zones, BSD Jails, and Docker ``contain'' applications, making them more secure and manageable.
\end{itemize}

A formal definition of \nameref{def:Virtualization} helped to establish system requirements and a target for functionality.
The virtualization requirements stated that:
\begin{enumerate}[noitemsep]
\item A VMM provides an environment for programs that is essentially identical to the original machine.
\item Programs running within that environment show only minor performance decreases.
\item The VMM is in complete control of physical system resources.
\end{enumerate}

These requirements of fidelity, performance, and safety still guide \nameref{def:Virtualization} efforts today.

\input{./EDAF35-Operating_Systems-Sections/Virtual_Machines/Benefits_Features}

\input{./EDAF35-Operating_Systems-Sections/Virtual_Machines/Building_Blocks}

\input{./EDAF35-Operating_Systems-Sections/Virtual_Machines/Virtualization_Types}


%%% Local Variables:
%%% mode: latex
%%% TeX-master: "../EDAF35-Operating_Systems-Reference_Sheet"
%%% End:
