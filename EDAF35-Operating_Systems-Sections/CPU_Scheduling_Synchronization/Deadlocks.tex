\subsection{Deadlocks}\label{subsec:Deadlocks}
\nameref{def:Deadlock} is a serious issue in \nameref{rmk:CPU_Scheduler}s because \nameref{def:Process}es lock resources for themselves.
A good example of a deadlock is ``When two trains approach each other at a crossing, both shall come to a full stop and neither shall start up again until the other has gone.''

\begin{definition}[Deadlock]\label{def:Deadlock}
  \emph{Deadlock} is when 2 processes require information or resources from each other to continue running.
  If this happens, neither process will provide the other with its required information, so they will both wait for each other, forever.
\end{definition}

There are only 2 options for handling \nameref{def:Deadlock}s:
\begin{enumerate}[noitemsep]
\item Prevent them from happening in the first place.
\item Identify them and fix the problem that is causing them.
\item Hope they don't happen and consider them as unlikely events to occur.
  \begin{itemize}[noitemsep]
  \item This is what most desktop \nameref{def:Operating_System}s do.
  \end{itemize}
\end{enumerate}

Most \nameref{def:Operating_System}s do \textbf{NOT} provide functionality to identify \nameref{def:Deadlock}s and correct them.

A system consists of a finite number of resources to be distributed among a number of competing processes.
The resources may be partitioned into several types (or classes), each consisting of some number of identical instances.
CPU cycles, files, and I/O devices (such as printers and DVD drives) are examples of resource types.
If a system has two CPUs, then the resource type CPU has two instances.
Similarly, the resource type printer may have five instances.
If a process requests an instance of a resource type, the allocation of \textbf{any} instance of the type should satisfy the request.
If it does not, then the instances are not identical, and the resource type classes have not been defined properly.
Under the normal mode of operation, a process may utilize a resource in only the following sequence:
\begin{enumerate}[noitemsep]
\item Request.
  The process requests the resource.
  If the request cannot be granted immediately (for example, if the resource is being used by another process), then the requesting process must wait until it can acquire the resource.
\item Use.
  The process can operate on the resource (for example, if the resource is a printer, the process can print on that printer).
\item Release.
  The process releases the resource.
\end{enumerate}

For each use of a \nameref{def:Kernel}-managed resource by a \nameref{def:Process} or \nameref{def:Thread}, the \nameref{def:Operating_System} checks to make sure that the process has requested and has been allocated the resource.
A system table records whether each resource is free or allocated.
For each resource that is allocated, the table also records the process to which it is allocated.
If a process requests a resource that is currently allocated to another process, it can be added to a queue of processes waiting for this resource.
\begin{blackbox}
  A set of \nameref{def:Process}es is in a \nameref{def:Deadlock}ed state when every process in the set is waiting for an event that can be caused only by another process in the set.
\end{blackbox}

%%% Local Variables:
%%% mode: latex
%%% TeX-master: "../../EDAF35-Operating_Systems-Reference_Sheet"
%%% End:
