\subsection{Page Replacement}\label{subsec:Page_Replacement}
If a \nameref{def:Process} of ten pages actually uses only half of them, then \nameref{def:Demand_Paging} saves the I/O necessary to load the five pages that are never used.
This also increases the degree of multiprogramming by running more processes, \nameref{def:Over_Allocating} memory.

\begin{definition}[Over-Allocating]\label{def:Over_Allocating}
  \emph{Over-allocating} is the process of putting more load on a component in the system than would normally be possible.

  In the context of \nameref{def:Paging} and \nameref{def:Demand_Paging}, this means that main memory has more \nameref{def:Process}es in it than would be normal in normal \nameref{def:Paging} schemes.
  This is because \textbf{ONLY} the pages that are needed to run these processes are loaded, and nothing more.
\end{definition}

If we run multiple \nameref{def:Process}es, each of which is multiple pages in size but actually only uses some of them, we can achieve higher CPU utilization and throughput, with physical frames to spare.
It is possible that each of these processes, for some reason, may suddenly try to use \textbf{all} of their pages \textbf{simulataneously}, resulting in a need for more physical frames than the system has.
The operating system has several options at this point:
\begin{enumerate}[noitemsep]
\item Terminate a user process.
  \begin{itemize}[noitemsep]
  \item \nameref{def:Demand_Paging} is the operating system’s attempt to improve the system’s utilization and throughput.
  \item Users should not be aware that their processes are running on a paged system—
  \item Paging should be logically transparent to the user.
  \item Not the best choice.
  \end{itemize}

\item Replace one page in memory with the requested one in swap (\nameref{def:Page_Replacement}).
  \begin{itemize}[noitemsep]
  \item \nameref{def:Operating_System} swaps out a process, freeing \textbf{all} its frames.
  \item Reduce the level of multiprogramming.
  \item Good option in certain circumstances (\nameref{def:Thrashing}).
  \end{itemize}
\end{enumerate}

\begin{definition}[Page Replacement]\label{def:Page_Replacement}
  \emph{Page replacement} is the process of replacing a page in memory with one that is \nameref{def:Swapping} in from the swap.

  Page replacement is basic to \nameref{def:Demand_Paging}.
  It completes the separation between logical memory and \nameref{def:Physical_Memory}.
  With this mechanism, an enormous \nameref{def:Virtual_Memory} can be provided for programmers on a smaller physical memory.
  Without demand paging, user addresses are still mapped into physical addresses, and the two sets of addresses can be different, however, all the pages of a process still must be in physical memory.
  With demand paging, the size of the \nameref{def:Logical_Address_Space} is no longer constrained by physical memory.

  The procedure for performing this replacement is listed in \Cref{subsubsec:Page_Replacement_Procedure}.
\end{definition}

Buffers for I/O also consume a considerable amount of memory.
Deciding how much memory to allocate to I/O and how much to program pages is a significant challenge.
Some systems allocate a fixed percentage of memory for I/O buffers, others allow user processes and the I/O subsystem to compete for all system memory.

\subsubsection{Replacement Procedure}\label{subsubsec:Page_Replacement_Procedure}
The basic steps to perform a \nameref{def:Page_Replacement} are shown below:
\begin{enumerate}[noitemsep]
\item Find the location of the desired page on the disk.
\item Find a free frame:
  \begin{enumerate}[noitemsep]
  \item If there is a free frame, use it.
  \item If there is no free frame, use a page-replacement algorithm to select a victim frame.
  \item Write the victim frame to the disk; change the page and frame tables accordingly.
  \end{enumerate}
\item Read the desired page into the newly freed frame; change the page and frame tables.
\item Continue the user process from where the page fault occurred.
\end{enumerate}


%%% Local Variables:
%%% mode: latex
%%% TeX-master: "../../EDAF35-Operating_Systems-Reference_Sheet"
%%% End:
