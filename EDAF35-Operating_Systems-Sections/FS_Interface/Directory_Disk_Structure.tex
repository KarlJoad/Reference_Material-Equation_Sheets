\subsection{Directory and Disk Structure}\label{subsec:Directory_Disk_Structure}
Each \nameref{def:Volume} that contains a \nameref{def:File_System} must also contain information about the \nameref{def:File}s in the system.
This information is kept in entries in a device directory (A volume's Table of Contents).
The device directory (commonly, the \nameref{def:Directory}) records information—such as name, location, size, and type—for all files on that volume.

\begin{definition}[Volume]\label{def:Volume}
  A \emph{Volume} is a logical view of the installed disks.
  Any entity that contains a \nameref{def:File_System} is considered a volume.
  In the case of a \nameref{def:RAID} setup, when members are pooled together, they are collectively addressed as a single volume.
\end{definition}

\subsubsection{Storage Structure}\label{subsubsec:Storage_Structure}
A general-purpose computer system has multiple storage devices, and those devices can be sliced up into \nameref{def:Volume}s that hold \nameref{def:File_System}s.
Computer systems may have zero or more file systems, and the file systems may be of varying types.

The file systems of computers can be extensive.
Even within a file system, it is useful to segregate files into groups and manage and act on those groups.
This organization involves the use of directories.

\subsubsection{Directory Overview}\label{subsubsec:Directory_Overview}
\begin{definition}[Directory]\label{def:Directory}
  The directory can be viewed as a symbol table that translates file names into their directory entries.
  Directories are files that are responsible for tracking and holding other files, which themselves may be directories.
\end{definition}

The directory itself can be organized in many ways.
The organization must allow us to insert entries, to delete entries, to search for a named entry, and to list all the entries in the directory.

Like a \nameref{def:File}, a \nameref{def:Directory} can be seen as an abstract data type that needs its computations defined before being concrete.
\begin{itemize}[noitemsep]
\item \textbf{Search for a file}.
  We need to be able to search a directory structure to find the entry for a particular file.
  Since files have symbolic names, and similar names may indicate a relationship among files, we may want to be able to find all files whose names match a particular pattern.

\item \textbf{Create a file}.
  New files need to be created and added to the directory.

\item \textbf{Delete a file}.
  When a file is no longer needed, we want to be able to remove it from the directory.

\item \textbf{List a directory}.
  We need to be able to list the files in a directory and the contents of the directory entry for each file in the list.

\item \textbf{Rename a file}.
  Because the name of a file represents its contents to its users, we must be able to change the name when the contents or use of the file changes.
  Renaming a file may also allow its position within the directory structure to be changed.

\item \textbf{Traverse the file system}.
  We may wish to access every directory and every file within a directory structure.
  For reliability, it is a good idea to backup the contents and structure of the entire file system at regular intervals.
\end{itemize}

\subsubsection{Single-Level Directory}\label{subsubsec:Single_Level_Directory}
All files are contained in the same directory, which is easy to support and understand.

However, there are significant limitations.
\begin{itemize}[noitemsep]
\item When the number of files increases or when the system has more than one user.
\item Since all files are in the same directory, they must have unique names.
\item If two users call their data file the same thing, then the unique-name rule is violated.
\end{itemize}

\subsubsection{Two-Level Directory}\label{subsubsec:Two_Level_Directory}
The standard solution is to create a separate directory for each user.
In the two-level directory structure, each user has their own User File Directory (UFD).
The UFDs have similar structures, but each lists only the files of a \textbf{single} user.
When a user job starts or a user logs in, the system’s Master File Directory (MFD) is searched for that user's UFD.\@
The MFD is indexed by user name or account number, and each entry points to the UFD for that user.

\begin{itemize}[noitemsep]
\item When a user refers to a particular file, only their own UFD is searched.
  Allowing different users to have files with the same name, as long as all the file names within each UFD are unique.
\item To create a file for a user, the operating system searches only that user’s UFD to ascertain whether another file of that name exists.
\item To delete a file, the operating system confines its search to the local UFD.\@
  Preventing the accidental deletion of another user’s file that has the same name.
\end{itemize}

The user directories themselves must be created and deleted as necessary.
A special system program can be run with the appropriate user name and account information.
The program creates a new UFD and adds an entry for it to the MFD.\@

However, this structure effectively isolates one user from another.
Isolation is a disadvantage when the users want to cooperate on some task and to access one another's files.
Some systems simply do not allow local user files to be accessed by other users, requiring a dedicated shared space.
If access is to be permitted, one user must have the ability to name a file in another user’s directory.
To name a particular file uniquely in a two-level directory, we must give both the user name and the file name.


%%% Local Variables:
%%% mode: latex
%%% TeX-master: "../../EDAF35-Operating_Systems-Reference_Sheet"
%%% End:
