\section{System Calls}\label{sec:System_Calls}
\begin{definition}[System Call]\label{def:System_Call}
  Software may trigger an interrupt by executing a special operation called a \emph{system call}.
  This can also be called a monitor call.
  A system call is a messaging interface between applications and the \nameref{def:Kernel}, with the applications issuing various requests and the \nameref{def:Kernel} fulfilling them or returning an error.

  System calls provide an interface to the services made available by an \nameref{def:Operating_System}.
  These services are a set of interfaces by which \nameref{def:Process}es running in \nameref{def:User}-space can interact with the system.
  These interfaces give \nameref{def:User}-level applications:
  \begin{itemize}[noitemsep]
  \item Controlled access to hardware
  \item A mechanism with which to create new \nameref{def:Process}es
  \item A mechanism to communicate with existing ones
  \item The capability to request other \nameref{def:Operating_System} resources
  \end{itemize}

  These calls are generally available as routines written in C and C++.
  Some of the lowest-level tasks (for example, tasks where hardware must be accessed directly) may be written using assembly.

  \begin{remark}[Syscall]\label{rmk:Syscall}
    In UNIX and UNIX-like systems, \nameref{def:System_Call} is usually shortened to \emph{syscall}.
  \end{remark}
\end{definition}

There are roughly 6 different types of system calls:
\begin{enumerate}[noitemsep]
\item \nameref{subsec:Process_Control}
  \begin{itemize}[noitemsep]
  \item End, Abort
  \item Load, Execute
  \item Create \nameref{def:Process}, Terminate \nameref{def:Process}
  \item Get process attributes, Set process attributes
  \item Wait for time
  \item Wait event, Signal event
  \item Allocate and Free memory
  \end{itemize}
\item \nameref{subsec:File_Manipulation}
  \begin{itemize}[noitemsep]
  \item Create file, Delete file
  \item Open, Close
  \item Read, Write, Reposition
  \item Get file attributes, Set file attributes
  \end{itemize}
\item \nameref{subsec:Device_Manipulation}
  \begin{itemize}[noitemsep]
  \item Request device, Release device
  \item Read, Write, Reposition
  \item Get device attributes, Set device attributes
  \item Logically attach or detach devices
  \end{itemize}
\item \nameref{subsec:Information_Maintenance}
  \begin{itemize}[noitemsep]
  \item Get time or date, Set time or date
  \item Get system data, Set system data
  \item Get \Nameref{Def:Process}, File, or Device attributes
  \item Set \Nameref{Def:Process}, File, or Device attributes
  \end{itemize}
\item \nameref{subsec:Communications}
  \begin{itemize}[noitemsep]
  \item Create, Delete communication connection
  \item Send, Receive messages
  \item Transfer status information
  \item Attach or Detach remote devices
  \end{itemize}
\item \nameref{subsec:Protection}
\end{enumerate}

\nameref{def:System_Call}s provide a layer between the hardware and \nameref{def:User}-space \nameref{def:Process}es.
This layer serves three primary purposes.
\begin{enumerate}[noitemsep]
\item It provides an abstracted hardware interface for \nameref{def:User}-space programs.
  When reading or writing from a file, applications do not have to be concerned with the type of disk, media, or even the type of filesystem on which the file resides.
\item \nameref{def:System_Call}s ensure system security and stability.
  With the \nameref{def:Kernel} acting as a middle-man between system resources and \nameref{def:User}-space, the \nameref{def:Kernel} can arbitrate access based on permissions, \nameref{def:User}s, and other criteria.
  This arbitration prevents applications from incorrectly using hardware, stealing other \nameref{def:Process}esâ€™ resources, or otherwise doing harm to the system.
\item There is a single common layer between \nameref{def:User}-space and the rest of the system allows for the virtualized system provided to \nameref{def:Process}es.
\end{enumerate}

\begin{table}[h!tbp]
  \centering
  \begin{tabular}{lll}
    \toprule
    & \textbf{Windows} & \textbf{Unix} \\
    \midrule
    \nameref{subsec:Process_Control} & \mintinline{cpp}{CreateProcess()} & \mintinline{c}{fork()} \\
    & \mintinline{cpp}{ExitProcess()} & \mintinline{c}{exit()} \\
    & \mintinline{cpp}{WaitForSingleObject()} & \mintinline{c}{wait()} \\
    \midrule
    \nameref{subsec:File_Manipulation} & \mintinline{cpp}{CreateFile()} & \mintinline{c}{open()} \\
    & \mintinline{cpp}{ReadFile()} & \mintinline{c}{read()} \\
    & \mintinline{cpp}{WriteFile()} & \mintinline{c}{write()} \\
    & \mintinline{cpp}{CloseHandle()} & \mintinline{c}{close()} \\
    \midrule
    \nameref{subsec:Device_Manipulation} & \mintinline{cpp}{SetConsoleMode()} & \mintinline{c}{ioctl()} \\
    & \mintinline{cpp}{ReadConsole()} & \mintinline{c}{read()} \\
    & \mintinline{cpp}{WriteConsole()} & \mintinline{c}{write()} \\
    \midrule
    \nameref{subsec:Information_Maintenance} & \mintinline{cpp}{GetCurrentProcessID()} & \mintinline{c}{getpid()} \\
    & \mintinline{cpp}{SetTimer()} & \mintinline{c}{alarm()} \\
    & \mintinline{cpp}{Sleep()} & \mintinline{c}{sleep()} \\
    \midrule
    \nameref{subsec:Communications} & \mintinline{cpp}{CreatePipe()} & \mintinline{c}{pipe()} \\
    & \mintinline{cpp}{CreateFileMapping()} & \mintinline{c}{shm_open()} \\
    & \mintinline{cpp}{MapViewOfFile()} & \mintinline{c}{mmap()} \\
    \midrule
    \nameref{subsec:Protection} & \mintinline{cpp}{SetFileSecurity()} & \mintinline{c}{chmod()} \\
    & \mintinline{cpp}{InitializeSecurityDescriptor()} & \mintinline{c}{umask()} \\
    & \mintinline{cpp}{SetSecurityDescriptorGroup()} & \mintinline{c}{chown()} \\
    \bottomrule
  \end{tabular}
  \caption{System Calls in Unix and Windows}
  \label{tab:System_Calls_Examples}
\end{table}

\nameref{def:System_Call}s are exposed to the programmer by an \nameref{def:API}.
\begin{definition}[Application Programming Interface]\label{def:API}
  An \emph{Application Programming Interface} (\emph{API}) specifies a set of functions that are available to an application programmer.
  They specify the parameters that are passed to each function and the return values the programmer can expect.

  Typically, API calls perform \nameref{def:System_Call}s in the background, without the programmer knowing about them.
\end{definition}




\subsection{Protection}\label{subsec:Protection}
Protection provides a mechanism for controlling access to the resources provided by a computer system.
Historically, protection was a concern only on multiprogrammed computer systems with several \nameref{def:User}s.
However, with the advent of networking and the Internet, all computer systems, from servers to mobile handheld devices, must be concerned with protection.
\input{./EDAF35-Operating_Systems-Sections/System_Calls/Communications}


%%% Local Variables:
%%% mode: latex
%%% TeX-master: "../EDAF35-Operating_Systems-Reference_Sheet"
%%% End:
